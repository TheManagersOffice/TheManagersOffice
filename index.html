<!DOCTYPE html>
<html lang="en">
<head>
  <!-- ========================================= -->
  <!-- 0: HEAD — minimal preload + cache bust    -->
  <!-- ========================================= -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Manager's Office</title>

  <!-- Cache-busted CSS -->
  <link rel="stylesheet" href="styles.css?v=30" />

  <!-- Non-blocking brand font -->
  <link rel="preload" as="font" href="BenguiatProITC-Medium.woff2" type="font/woff2" crossorigin />

  <!-- Preload the highest-impact images only -->
  <link rel="preload" as="image" href="hero.avif" />
  <link rel="preload" as="image" href="hero.webp" />
  <link rel="preload" as="image" href="tmostrip.avif" />
  <link rel="preload" as="image" href="tmostrip.webp" />

  <!-- Force-paint HOTFIX (renders sections immediately) -->
  <style>
    .hero, .logo-section, .offerings, .events, .open-decks, .footer {
      content-visibility: auto !important;
      contain-intrinsic-size: auto !important;
    }
    .fade-in, .fade-in.visible {
      opacity: 1 !important;
      transform: none !important;
      transition: none !important;
    }
  </style>
</head>
<body>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const images = document.querySelectorAll('.img-wrap img');
      images.forEach(img => {
        if (img.complete) {
          img.parentElement.classList.add('is-loaded');
        } else {
          img.addEventListener('load', () => {
            img.parentElement.classList.add('is-loaded');
          });
          img.addEventListener('error', () => {
            console.warn(`Failed to load image: ${img.src}`);
          });
        }
      });
    });
  </script>

  <!-- ========================================= -->
  <!-- AUTO-FADE INTRO OVERLAY (no click needed) -->
  <!-- ========================================= -->
  <div id="tmo-intro" class="tmo-intro" aria-hidden="true">
    <!-- Optional: swap to your logo image or remove <img> for pure black -->
    <img class="tmo-intro-logo" src="tmo.webp" alt="" />
  </div>

  <!-- ========================================= -->
  <!-- 0: HEADER                                -->
  <!-- ========================================= -->
  <header class="header">
    <div class="header-inner">
      <div class="logo">The Manager's Office</div>
      <nav class="nav">
        <a href="https://www.instagram.com/themanagersoffice_/" target="_blank" rel="noopener">Contact</a>
        <a href="https://www.twitch.tv/the_managers_office" target="_blank" rel="noopener">Live</a>
        <a href="#events">Events</a>
        <a href="#open-decks">Open Decks</a>
      </nav>
    </div>
  </header>

  <!-- ========================================= -->
  <!-- 1: HERO                                  -->
  <!-- ========================================= -->
  <section class="hero">
    <div class="container hero-grid">
      <div class="hero-copy">
        <h1>Immerse yourself in sonic elegance.</h1>
        <p>Welcome to The Manager’s Office — your private sanctuary for creativity, focus, and flow.</p>
        <p class="subtext">A professional recording/DJ studio designed for creators in Adelaide’s inner west.</p>
        <div class="cta-row">
          <a class="btn btn-primary" href="#offerings" aria-label="View available booking options for The Manager's Office">View Bookings</a>
          <a class="btn btn-ghost" href="https://www.twitch.tv/the_managers_office" target="_blank" rel="noopener" aria-label="Watch live streams from The Manager's Office">Watch Live</a>
        </div>
      </div>
      <!-- HERO IMAGE -->
      <div class="hero-media">
        <picture class="img-wrap" data-ratio="16/9">
          <source srcset="hero.avif" type="image/avif" />
          <source srcset="hero.webp" type="image/webp" />
          <img src="hero.jpg" alt="The Manager's Office Studio" width="1600" height="900" loading="eager" decoding="auto" fetchpriority="high" />
        </picture>
      </div>
    </div>
  </section>

<!-- ========================================= -->
<!-- 1.25: MOBILE — QUICK ACTIONS (MOBILE ONLY) -->
<!-- ========================================= -->
<section class="mobile-quick" aria-label="Mobile quick actions">
  <div class="container mobile-quick-inner">
    <div class="mobile-quick-buttons">
      <a class="btn btn-primary" href="#open-decks" aria-label="Go to Open Decks signup">Open Decks</a>
      <a class="btn btn-ghost" href="#events" aria-label="Go to Events">Events</a>
      <a class="btn btn-ghost" href="#contact" aria-label="Contact The Manager's Office">Contact</a>
    </div>
  </div>
</section>
  <!-- ========================================= -->
  <!-- INTRO OVERLAY SCRIPT (auto-fade once)     -->
  <!-- ========================================= -->
  <script>
    (function () {
      const intro = document.getElementById('tmo-intro');
      if (!intro) return;
      const SHOW_DELAY = 300;
      const HIDE_AFTER = 1200;
      const REMOVE_AFTER = 700;
      // Skip overlay on refresh in this tab
      if (sessionStorage.getItem('tmoIntroSeen') === '1') {
        intro.style.display = 'none';
        document.body.classList.remove('tmo-lock');
        return;
      }
      document.body.classList.add('tmo-lock');
      // Warm cache (property form, not attribute)
      ['hero.avif', 'hero.webp', 'tmostrip.avif', 'tmostrip.webp', 'solo.avif', 'solo.webp', 'group.avif', 'group.webp', 'rec.avif', 'rec.webp', 'bassline.avif', 'bassline.webp', 'opendecks.avif', 'opendecks.webp', 'ancient.png']
        .forEach(src => {
          const i = new Image();
          i.decoding = 'auto';
          i.loading = 'eager';
          i.fetchPriority = 'high';
          i.src = src;
        });
      const start = () => {
        setTimeout(() => {
          setTimeout(() => {
            intro.classList.add('is-out');
            document.body.classList.remove('tmo-lock');
            sessionStorage.setItem('tmoIntroSeen', '1');
            setTimeout(() => { intro.remove(); }, REMOVE_AFTER);
          }, HIDE_AFTER);
        }, SHOW_DELAY);
      };
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', start);
      } else {
        start();
      }
    })();
  </script>

  <!-- ========================================= -->
  <!-- 2: LOGO STRIP                            -->
  <!-- ========================================= -->
  <section class="logo-section">
    <img src="tmostrip.webp" alt="The Manager's Office Strip Logo" class="studio-strip" width="1200" height="150" loading="eager" decoding="auto" fetchpriority="high" />
  </section>

  <!-- ========================================= -->
  <!-- 3: OFFERINGS (SOLO / GROUP)              -->
  <!-- ========================================= -->
  <section id="offerings" class="offerings">
    <div class="container offerings-grid">
      <!-- Solo -->
      <article class="card">
        <div class="card-media">
          <picture class="img-wrap" data-ratio="4/3">
            <source srcset="solo.avif" type="image/avif" />
            <source srcset="solo.webp" type="image/webp" />
            <img src="solo.jpg" alt="Solo booth hire image" width="400" height="300" loading="eager" decoding="auto" fetchpriority="high" />
          </picture>
        </div>
        <div class="card-body">
          <div class="card-top">
            <h2>SOLO BOOTH HIRE</h2>
            <div class="price-badges">
              <span class="badge">A$40/hr</span>
              <span class="badge badge-alt">A$70 / 2hrs</span>
            </div>
          </div>
          <p><strong>Solo Booth Hire – $40/hr or $70/2hrs</strong><br />Price varies ・ 1 hr+</p>
          <p>Looking for a space to sharpen your skills, create content, or just zone out and mix? Welcome to The Manager’s Office — your own private DJ booth...</p>
          <ul class="checklist">
            <li>Pioneer CDJ-3000s + Xone:92 + Technics turntables</li>
            <li>Ambience lighting & climate control</li>
            <li>Content-friendly setup</li>
          </ul>
          <div class="card-actions">
            <a class="btn btn-primary" target="_blank" rel="noopener" href="https://book.squareup.com/appointments/yvse7dh3u88bcq/location/LSSDAXPR1VS9Z/services/FIGQ5RM6PAIIVYDHYSQTCNSX" aria-label="Book a solo booth session at The Manager's Office">Book Solo</a>
          </div>
        </div>
      </article>
      <!-- Group -->
      <article class="card">
        <div class="card-media">
          <picture class="img-wrap" data-ratio="4/3">
            <source srcset="group.avif" type="image/avif" />
            <source srcset="group.webp" type="image/webp" />
            <img src="group.jpg" alt="Group booth hire image" width="400" height="300" loading="eager" decoding="auto" fetchpriority="high" />
          </picture>
        </div>
        <div class="card-body">
          <div class="card-top">
            <h2>GROUP BOOTH HIRE</h2>
            <div class="price-badges">
              <span class="badge">A$200 / 4hrs</span>
              <span class="badge badge-alt">A$200</span>
            </div>
          </div>
          <p><strong>Group Booth Hire – $200/4hrs (You + up to 4 friends)</strong><br />A$200.00 ・ 4 hr</p>
          <p>Grab your crew and take over The Manager’s Office for your own private session...</p>
          <ul class="checklist">
            <li>Private access for up to 5 people</li>
            <li>CDJ-3000s + pro monitoring</li>
            <li>Lights, lounge & fridge access</li>
          </ul>
          <div class="card-actions">
            <a class="btn btn-primary" target="_blank" rel="noopener" href="https://book.squareup.com/appointments/yvse7dh3u88bcq/location/LSSDAXPR1VS9Z/services/RIYKGVSGXXIY6O4LX4EVX7WV" aria-label="Book a group booth session at The Manager's Office">Book Group</a>
          </div>
        </div>
      </article>
    </div>
  </section>

<!-- ========================================= -->
<!-- 3.95: EVENTS                             -->
<!-- ========================================= -->
<section id="events" class="events">
  <div class="container events-inner">
    <div class="events-head">
      <h2>Events</h2>
    </div>

    <div class="events-viewport" id="evViewport">
      <div class="events-track" id="evTrack">
        <!-- Event 1 -->
        <a href="https://www.instagram.com/rectify.clltv/" target="_blank" rel="noopener" class="event-slide" aria-label="Open Rectify Instagram">
          <picture class="img-wrap" data-ratio="3/4" id="event-rec">
            <source srcset="rec.avif" type="image/avif" />
            <source srcset="rec.webp" type="image/webp" />
            <img src="rec.jpg" alt="Rectify event poster" width="320" height="427" loading="eager" decoding="auto" fetchpriority="low" />
          </picture>
        </a>

        <!-- Event 2 -->
        <a href="https://events.ticketbooth.com.au/tickets/soluna-adl" target="_blank" rel="noopener" class="event-slide" aria-label="Open FrontRoom tickets">
          <picture class="img-wrap" data-ratio="3/4" id="event-frontroom">
            <source srcset="frontroom.avif" type="image/avif" />
            <source srcset="frontroom.webp" type="image/webp" />
            <img src="frontroom.jpg" alt="frontroom" width="320" height="427" loading="eager" decoding="auto" fetchpriority="low" />
          </picture>
        </a>

        <!-- Event 3 -->
        <a href="https://triniq.com/DoofTechnoNikkiSig?fbclid=PAZXh0bgNhZW0CMTEAAadh66EVOzw8QQqIVzLZGuAlCFOOr7zsV7qEgrbjF_OX4gOvv9RSEfizrAHZ7A_aem_bIWT4gEGCoO1RtuQYU9CMg" target="_blank" rel="noopener" class="event-slide" aria-label="Open Ancient World Instagram">
          <picture class="img-wrap" data-ratio="3/4" id="event-ancient">
            <source srcset="ancient.avif" type="image/avif" />
            <source srcset="ancient.webp" type="image/webp" />
            <img src="ancient.png" alt="Ancient World poster" width="320" height="427" loading="eager" decoding="auto" fetchpriority="low" />
          </picture>
        </a>

        <!-- Event 4 -->
        <a href="https://events.humanitix.com/audiojack-uk-gala-room" target="_blank" rel="noopener" class="event-slide" aria-label="Open audiojack-uk-gala-room">
          <picture class="img-wrap" data-ratio="3/4" id="event-audio">
            <source srcset="backroom.avif" type="image/avif" />
            <source srcset="backroom.webp" type="image/webp" />
            <img src="backroom.jpg" alt="audiojack-uk-gala-room poster" width="320" height="427" loading="eager" decoding="auto" fetchpriority="low" />
          </picture>
        </a>
      </div>
    </div>
  </div>
</section>


  <!-- ========================================= -->
  <!-- 3.9: OPEN DECKS                          -->
  <!-- ========================================= -->
  <section id="open-decks" class="open-decks">
    <div class="container open-decks-inner">
      <div class="open-decks-copy">
        <h2>Open Decks Signup</h2>
        <p>Want a slot on <strong>The Manager’s Office</strong> Opendecks? Throw your name in and we’ll line you up for an upcoming session. All styles welcome — bring your flavour.</p>
        <ul class="checklist">
          <li>Quick form (5–10 mins)</li>
          <li>Solo or B2B options</li>
          <li>VODs + clips for socials</li>
        </ul>
        <a class="btn btn-primary" href="https://forms.gle/8T6VNbuAfLkKUZat5" target="_blank" rel="noopener noreferrer" aria-label="Apply for an open decks session at The Manager's Office">Apply on Google Form</a>
      </div>
      <div class="open-decks-art">
        <picture class="img-wrap" data-ratio="10/7" id="opendecks-image">
          <source srcset="opendecks.avif" type="image/avif" />
          <source srcset="opendecks.webp" type="image/webp" />
          <img src="opendecks.jpg" alt="Open Decks artwork" width="900" height="630" loading="eager" decoding="auto" fetchpriority="high" />
        </picture>
      </div>
    </div>
  </section>

  <!-- ========================================= -->
  <!-- 4: FOOTER                                -->
  <!-- ========================================= -->
  <footer class="footer" id="contact">
    <div class="container footer-inner">
      <p>152 Ashley St, Underdale — Adelaide SA, Australia</p>
      <div class="footer-socials">
        <a href="https://www.instagram.com/themanagersoffice_/" target="_blank" rel="noopener">Instagram</a>
        <a href="https://www.tiktok.com/@_themanagersoffice" target="_blank" rel="noopener">TikTok</a>
      </div>
      <p>© 2025 The Manager's Office. All Rights Reserved.</p>
    </div>
  </footer>

<script>
  (function () {
    const viewport = document.getElementById('evViewport');
    const track = document.getElementById('evTrack');
    if (!viewport || !track) return;

    /* -----------------------------------------
       CONFIG
    ----------------------------------------- */
    const BASE = 0.6; // pixels per frame (subtle so posters are readable)

    // More robust touch detection (works on iOS/Android/Edge)
    const isTouch =
      window.matchMedia('(pointer: coarse)').matches ||
      ('ontouchstart' in window) ||
      (navigator.maxTouchPoints > 0);

    // Respect reduced-motion ONLY on non-touch devices
    const prefersReduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    let speed = BASE;
    if (prefersReduce && !isTouch) speed = 0;

    let running = true, x = 0, loopW = 0, rafId = null;

    /* -----------------------------------------
       BUILD STRIPS
    ----------------------------------------- */
    function build() {
      cancelAnimationFrame(rafId);
      x = 0;
      track.style.transform = 'translate3d(0,0,0)';

      // Keep only the originals (anchors)
      const originals = Array.from(track.children).filter(n => !n.dataset || !n.dataset.clone);
      if (!originals.length) return;

      // Hidden measurer to decide how many slides we need
      const measurer = document.createElement('div');
      measurer.className = 'events-strip';
      originals.forEach(el => measurer.appendChild(el.cloneNode(true)));

      track.innerHTML = '';
      measurer.style.position = 'absolute';
      measurer.style.visibility = 'hidden';
      measurer.style.pointerEvents = 'none';
      track.appendChild(measurer);

      const targetWidth = Math.max(viewport.clientWidth * 2, 1);
      let guard = 0;
      while (measurer.scrollWidth < targetWidth && guard < 50) {
        originals.forEach(src => measurer.appendChild(src.cloneNode(true)));
        guard++;
      }

      // Two identical strips for seamless looping
      const strip = document.createElement('div');
      strip.className = 'events-strip';
      Array.from(measurer.children).forEach(n => strip.appendChild(n.cloneNode(true)));

      const cloneStrip = strip.cloneNode(true);
      cloneStrip.dataset.clone = '1';

      track.innerHTML = '';
      track.appendChild(strip);
      track.appendChild(cloneStrip);

      loopW = strip.scrollWidth || 1; // avoid div-by-zero

      // ----- Mobile watchdog: if width is still 0 (images/layout not ready), rebuild once more
      if (loopW <= 1) {
        setTimeout(() => {
          // second attempt after paint
          const again = document.createElement('div');
          again.className = 'events-strip';
          Array.from(strip.children).forEach(n => again.appendChild(n.cloneNode(true)));
          track.innerHTML = '';
          track.appendChild(again);
          const againClone = again.cloneNode(true);
          againClone.dataset.clone = '1';
          track.appendChild(againClone);
          loopW = again.scrollWidth || 1;
        }, 90);
      }
    }

    /* -----------------------------------------
       ANIMATE
    ----------------------------------------- */
    function tick() {
      if (running && loopW > 0 && speed > 0) {
        x -= speed;
        if (-x >= loopW) x += loopW;
        track.style.transform = `translate3d(${x}px,0,0)`;
      }
      rafId = requestAnimationFrame(tick);
    }

    /* -----------------------------------------
       INTERACTION / LIFECYCLE
    ----------------------------------------- */
    // Pause on hover/focus only for fine pointers (desktop mouse)
    const finePtr = window.matchMedia('(pointer: fine)').matches;
    if (finePtr) {
      const pause = () => { running = false; };
      const resume = () => { running = true; };
      viewport.addEventListener('mouseenter', pause);
      viewport.addEventListener('mouseleave', resume);
      viewport.addEventListener('focusin', pause);
      viewport.addEventListener('focusout', resume);
    }

    // Page visibility (mobile browsers can throttle rAF)
    document.addEventListener('visibilitychange', () => { running = !document.hidden; });

    // Rebuild on resize/orientation (debounced a bit more for mobile)
    let resizeT;
    const rebuild = () => {
      clearTimeout(resizeT);
      resizeT = setTimeout(() => {
        build();
        x = 0;
        track.style.transform = 'translate3d(0,0,0)';
      }, 160);
    };
    window.addEventListener('resize', rebuild, { passive: true });
    window.addEventListener('orientationchange', rebuild, { passive: true });

    /* -----------------------------------------
       INIT (delayed to let mobile/Edge finish layout)
    ----------------------------------------- */
    setTimeout(() => {
      // Double-rAF to ensure a painted frame before measuring on mobile WebKit
      requestAnimationFrame(() => {
        requestAnimationFrame(() => {
          build();
          rafId = requestAnimationFrame(tick);
        });
      });
    }, 60);
  })();
</script>
